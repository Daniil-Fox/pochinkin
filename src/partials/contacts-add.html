<section class="contacts" id="contacts-map">
  <div class="container">
    <h2 class="title2 contacts__title">Адреса наших сервисов</h2>
    <div class="contacts__row">
      <div class="contacts__tab active" data-contacts-tab="list">Списком</div>
      <div class="contacts__tab" data-contacts-tab="map">На карте</div>
      <div class="contacts__form">
        <input
          type="text"
          class="contacts__input"
          id="suggest"
          placeholder="Поиск по адресу"
        />
        <button class="btn-reset contacts__search">
          <svg
            width="22"
            height="22"
            viewBox="0 0 22 22"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              fill-rule="evenodd"
              clip-rule="evenodd"
              d="M9.62499 1.8335C8.38253 1.8336 7.15811 2.13083 6.05389 2.70038C4.94967 3.26993 3.99766 4.09529 3.27729 5.1076C2.55692 6.11991 2.08908 7.28981 1.9128 8.5197C1.73653 9.74959 1.85693 11.0038 2.26395 12.1777C2.67098 13.3516 3.35283 14.4111 4.25262 15.2679C5.15241 16.1247 6.24405 16.7539 7.43646 17.103C8.62887 17.4521 9.88747 17.5109 11.1073 17.2747C12.327 17.0384 13.4726 16.5139 14.4485 15.7448L17.7962 19.0925C17.969 19.2595 18.2006 19.3519 18.4409 19.3498C18.6813 19.3477 18.9112 19.2513 19.0812 19.0813C19.2511 18.9114 19.3475 18.6815 19.3496 18.4411C19.3517 18.2008 19.2593 17.9692 19.0923 17.7963L15.7447 14.4487C16.6503 13.2997 17.2142 11.919 17.3718 10.4646C17.5294 9.01013 17.2744 7.54068 16.6359 6.22442C15.9973 4.90815 15.0011 3.79824 13.7613 3.02171C12.5214 2.24518 11.088 1.8334 9.62499 1.8335ZM3.66665 9.62516C3.66665 8.04491 4.29441 6.52939 5.41181 5.41198C6.52921 4.29458 8.04474 3.66683 9.62499 3.66683C11.2052 3.66683 12.7208 4.29458 13.8382 5.41198C14.9556 6.52939 15.5833 8.04491 15.5833 9.62516C15.5833 11.2054 14.9556 12.7209 13.8382 13.8383C12.7208 14.9557 11.2052 15.5835 9.62499 15.5835C8.04474 15.5835 6.52921 14.9557 5.41181 13.8383C4.29441 12.7209 3.66665 11.2054 3.66665 9.62516Z"
              fill="#8E8E8E"
            />
          </svg>
        </button>
      </div>
    </div>

    <div class="cities-slider" id="controls">
      <div
        class="contacts__row swiper-wrapper contacts__cities contacts__row--30"
        id="cities"
      ></div>
    </div>

    <div class="contacts__content active" data-contacts-content="list">
      <div class="contacts__city">Москва</div>
      <ul class="contacts__list list-reset">
        <li
          class="contacts__item contacts-item"
          data-coords="[55.831903, 37.411961]"
        >
          <div class="contacts-item__info">
            <div class="contacts-item__title">Красноармейская, 23</div>
            <div class="contacts-item__metro">метро Аэропорт</div>
          </div>
          <div class="contacts-item__tt desc">
            <span>Пн-Пт: 11:00 - 20:00</span>
            <span>Сб-Вс: 11:00 - 16:00</span>
            <a href="tel:+74950235544">+7 (495) 023-55-44</a>
          </div>
        </li>
        <li
          class="contacts__item contacts-item"
          data-coords="[55.831903, 37.411961]"
        >
          <div class="contacts-item__info">
            <div class="contacts-item__title">Луговой проезд, 11</div>
            <div class="contacts-item__metro">метро Марьино</div>
          </div>
          <div class="contacts-item__tt desc">
            <span>Пн-Пт: 9:00 - 20:00</span>
            <span>Сб-Вс: 11:00 - 17:00</span>
            <a href="tel:+74953247676"> +7 (495) 324-76-76</a>
            <a href="tel:+74953247676"> +7 (495) 324-76-76</a>
            <small>Whatsapp для фото поломок</small>
          </div>
        </li>
        <li
          class="contacts__item contacts-item"
          data-coords="[55.831903, 37.411961]"
        >
          <div class="contacts-item__info">
            <div class="contacts-item__title">Миклухо-Маклая, 34</div>
            <div class="contacts-item__metro">метро Беляево</div>
          </div>
          <div class="contacts-item__tt desc">
            <span>Пн-Пт: 11:00 - 20:00</span>
            <span>Сб-Вс: 11:00 - 16:00</span>
            <a href="tel:+74950325151">+7 (495) 032-51-51</a>
          </div>
        </li>
        <li
          class="contacts__item contacts-item"
          data-coords="[55.831903, 37.411961]"
        >
          <div class="contacts-item__info">
            <div class="contacts-item__title">
              Амундсена, 3 (корп. 2, подъезд 3, домофон 2В)
            </div>
            <div class="contacts-item__metro">метро Свиблово</div>
          </div>
          <div class="contacts-item__tt desc">
            <span>Вт-Вс:11-00 - 19-30</span>
            <span> Пн - выходной</span>
            <a href="tel:+79257625127">+7 925 762-51-27</a>
          </div>
        </li>
        <li
          class="contacts__item contacts-item"
          data-coords="[55.831903, 37.411961]"
        >
          <div class="contacts-item__info">
            <div class="contacts-item__title">Студенческая, 32</div>
            <div class="contacts-item__metro">метро Студенческая</div>
          </div>
          <div class="contacts-item__tt desc">
            <span>Пн-Пт: 9:00 - 20:00</span>
            <span>Сб-Вс: 11:00 - 17:00</span>
            <a href="tel:+79037242392">+7 903-724-23-92</a>
            <small>работает WhatsApp</small>
          </div>
        </li>
        <li
          class="contacts__item contacts-item"
          data-coords="[55.831903, 37.411961]"
        >
          <div class="contacts-item__info">
            <div class="contacts-item__title">
              Рубцовская набережная,2 (корп. 3)
            </div>
            <div class="contacts-item__metro">метро Электрозаводская</div>
          </div>
          <div class="contacts-item__tt desc">
            <span>Пн-Пт: 11:00 - 20:00</span>
            <span>Сб-Вс: 10:00 - 17:00</span>
            <a href="tel:+74953241616">+7 (495) 324-16-16</a>
          </div>
        </li>
      </ul>
    </div>

    <div class="contacts__content" data-contacts-content="map">
      <div id="map"></div>
    </div>
  </div>
</section>

<!-- <script type="module">
  let myMap;
  init();
  // Инициализация карты
  async function init() {
    await ymaps3.ready;

    const { YMap, YMapDefaultSchemeLayer, YMapDefaultFeaturesLayer } = ymaps3;

    // Import the package to add a default marker
    const { YMapDefaultMarker } = await ymaps3.import(
      "@yandex/ymaps3-default-ui-theme"
    );

    myMap = new YMap(
      document.getElementById("map"),
      {
        location: {
          center: [37.588144, 55.733842],
          zoom: 10,
        },
      },
      [new YMapDefaultSchemeLayer({}), new YMapDefaultFeaturesLayer({})]
    );
    // Массив для хранения меток
    const placemarks = [
      {
        coords: [55.7558, 37.6173],
        hint: "Филиал СДЕК 1",
        balloon: "Адрес: Филиал 1",
      },
      {
        coords: [55.761, 37.6173],
        hint: "Филиал СДЕК 2",
        balloon: "Адрес: Филиал 2",
      },
    ];

    // Создаем метки и добавляем их на карту
    placemarks.forEach(function (place) {
      const marker = new YMapDefaultMarker({
        coordinates: place.coords,
        title: "africa",
      });
      myMap.addChild(marker);
    });

    // Обработчик клика по заведению в списке
    // document.querySelectorAll(".place").forEach(function (element) {
    //   element.addEventListener("click", function () {
    //     const coords = JSON.parse(this.getAttribute("data-coords"));
    //     myMap.setCenter(coords, 15); // Увеличение уровня зума и центрирование карты
    //   });
    // });

    // // Обработчик клика по кнопкам городов
    // document.querySelectorAll(".city-button").forEach(function (button) {
    //   button.addEventListener("click", function () {
    //     const cityCoords = JSON.parse(this.getAttribute("data-coords"));
    //     myMap.setCenter(cityCoords, 12); // Установить уровень зума

    //     // Меняем цвет кнопки
    //     document
    //       .querySelectorAll(".city-button")
    //       .forEach((btn) => btn.classList.remove("active"));
    //     this.classList.add("active");
    //   });
    // });
  }
</script> -->

<!-- <script>
  ymaps.ready(init);

  let myMap;

  const placemarks = [
    {
      coords: [55.831903, 37.411961],
      hint: "Филиал СДЕК 1",
      address: "Адрес: Филиал 1",
    },
    {
      coords: [55.763338, 37.565466],
      hint: "Филиал СДЕК 2",
      address: "Адрес: Филиал 2",
    },

    {
      coords: [55.744522, 37.616378],
      hint: "Филиал СДЕК 4",
      address: "Адрес: Филиал 4",
    },
    {
      coords: [55.780898, 37.642889],
      hint: "Филиал СДЕК 5",
      address: "Адрес: Филиал 5",
    },
    {
      coords: [55.793559, 37.435983],
      hint: "Филиал СДЕК 6",
      address: "Адрес: Филиал 6",
    },
  ];

  var find = function (arr, find) {
    return arr.filter(function (value) {
      return (
        (value.address + "").toLowerCase().indexOf(find.toLowerCase()) != -1
      );
    });
  };
  var myProvider = {
    suggest: function (request, options) {
      console.log(request);
      var res = find(placemarks, request),
        arrayResult = [],
        results = Math.min(options.results, res.length);
      for (var i = 0; i < results; i++) {
        arrayResult.push({
          displayName: res[i].hint,
          value: res[i].address,
        });
      }
      return ymaps.vow.resolve(arrayResult);
    },
  };

  function init() {
    // Создаём экземпляр карты
    myMap = new ymaps.Map("map", {
      center: [55.7558, 37.6173], // Начальные координаты (Москва)
      zoom: 10,
    });

    var suggestView1 = new ymaps.SuggestView("suggest", {
      provider: myProvider,
      results: 3,
    });

    objectManager = new ymaps.ObjectManager({
      // Чтобы метки начали кластеризоваться, выставляем опцию.
      clusterize: true,
      geoObjectOpenBalloonOnClick: false,
      clusterOpenBalloonOnClick: false,
    });

    // Массив для хранения меток

    const features = placemarks.map((shop, index) => {
      return {
        type: "Feature",
        id: index,
        geometry: {
          type: "Point",
          coordinates: shop.coords,
        },
        properties: {
          balloonContent: `<strong>${shop.hint}</strong><br>${shop.balloon}`,
          id: index, // Добавить ID для работы с кликами
        },
      };
    });

    objectManager.add({
      type: "FeatureCollection",
      features: features,
    });
    myMap.geoObjects.add(objectManager);
    // Обработчик клика по заведению в списке
    document.querySelectorAll(".place").forEach(function (element) {
      element.addEventListener("click", function () {
        const coords = JSON.parse(this.getAttribute("data-coords"));
        myMap.setCenter(coords, 15); // Увеличение уровня зума и центрирование карты
      });
    });

    const cityButtons = document.querySelectorAll(".contacts__city-button");
    // // Обработчик клика по кнопкам городов
    const clearActive = () => {
      cityButtons.forEach((btn) => btn.classList.remove("active"));
    };

    cityButtons.forEach(function (button) {
      button.addEventListener("click", function () {
        clearActive();
        button.classList.add("active");

        const cityCoords = JSON.parse(this.getAttribute("data-coords"));
        myMap.setCenter(cityCoords, 12); // Установить уровень зума

        // Меняем цвет кнопки
        document
          .querySelectorAll(".city-button")
          .forEach((btn) => btn.classList.remove("active"));
        this.classList.add("active");
      });
    });
  }
</script> -->
